# Rust Backblaze Demo

Examples of using Backblaze

## Running

You need an application key. See the [Application Keys](https://www.backblaze.com/docs/cloud-storage-application-keys) docs.

```bash
cat << EOF > .env
export BACKBLAZE_KEY_ID=<backblaze key id>
export BACKBLAZE_KEY=<backblaze key value>
export BACKBLAZE_BUCKET=<backblaze bucket>
export AWS_ENDPOINT_URL=<backblaze bucket endpoint url>
export AWS_ACCESS_KEY_ID="$BACKBLAZE_KEY_ID"
export AWS_SECRET_ACCESS_KEY="$BACKBLAZE_KEY
EOF
```

Source the envvars:

```bash
source .env
```

Then run:

```bash
mkdir audio
cargo run --release
```

## Sample Run

I uploaded the same audio file to ~100 different uuid keys to simulate having 100 files. Each file is ~12MB.

```bash
# Native API
[923.481311ms, 453.845632ms, 721.664297ms, 556.871047ms, 507.227066ms, 601.740568ms, 579.529496ms, 638.91365ms, 716.44695ms, 709.137196ms, 913.332824ms, 772.078251ms, 660.381745ms, 500.293811ms, 599.975505ms, 578.336294ms, 434.079645ms, 458.366532ms, 841.259363ms, 485.304593ms, 440.85985ms, 1.43483721s, 518.862386ms, 398.64921ms, 533.475996ms, 427.297449ms, 357.532828ms, 584.887196ms, 550.517317ms, 1.065419449s, 476.092183ms, 573.347999ms, 570.354707ms, 633.475289ms, 583.459835ms, 473.353912ms, 510.600141ms, 561.750714ms, 296.758858ms, 352.159109ms, 437.385795ms, 576.847748ms, 444.069184ms, 302.000287ms, 344.381753ms, 327.083104ms, 909.940137ms, 617.701851ms, 381.220081ms, 443.655715ms, 468.117946ms, 814.276691ms, 298.251152ms, 340.618145ms, 426.927957ms, 358.687864ms, 893.542356ms, 753.635837ms, 410.983251ms, 385.671352ms, 479.209165ms, 640.112737ms, 353.655308ms, 345.128116ms, 444.640982ms, 862.567787ms, 641.835824ms, 433.045308ms, 454.010299ms, 488.168623ms, 550.290813ms, 766.887979ms, 335.219591ms, 432.31762ms, 398.124869ms, 1.019919001s, 446.669563ms, 577.103555ms, 413.279096ms, 522.110133ms, 730.505942ms, 358.666269ms, 307.399828ms, 666.431775ms, 619.255295ms, 504.502172ms, 550.790566ms, 437.040292ms, 479.553289ms, 627.425174ms, 841.817387ms, 438.328361ms, 442.627616ms, 425.202756ms, 794.442286ms, 897.032682ms, 378.539126ms, 816.055819ms, 437.954737ms, 1.481479854s]
average duration: 567.24

# S3 SDK
[826.907326ms, 673.147394ms, 632.697814ms, 443.959843ms, 331.217873ms, 591.630494ms, 548.554185ms, 581.003373ms, 478.550351ms, 639.92047ms, 496.845766ms, 974.684324ms, 585.213935ms, 625.499321ms, 671.113702ms, 923.904777ms, 331.626537ms, 485.478448ms, 983.856811ms, 393.126588ms, 689.883909ms, 485.656131ms, 540.110916ms, 546.563616ms, 1.045622132s, 490.591267ms, 330.71143ms, 525.188283ms, 502.552034ms, 491.939966ms, 362.277372ms, 731.697447ms, 531.779283ms, 444.418218ms, 338.060405ms, 330.968085ms, 546.700606ms, 556.565691ms, 596.198249ms, 410.511615ms, 388.936306ms, 951.02926ms, 654.270425ms, 454.506178ms, 744.948319ms, 663.739838ms, 564.094295ms, 591.456339ms, 363.816445ms, 493.422793ms, 561.349528ms, 452.055021ms, 323.085097ms, 478.210785ms, 497.683541ms, 808.598105ms, 531.730742ms, 414.474906ms, 399.187565ms, 494.872462ms, 447.521423ms, 1.19047827s, 578.801535ms, 722.629147ms, 827.40749ms, 500.057146ms, 558.106493ms, 626.785535ms, 460.191484ms, 411.380596ms, 478.392459ms, 666.223657ms, 1.059788824s, 532.320483ms, 1.471625177s, 486.86304ms, 512.057303ms, 379.758599ms, 506.11101ms, 382.550035ms, 408.025449ms, 456.347915ms, 528.732445ms, 782.062194ms, 485.792714ms, 375.574886ms, 547.437291ms, 375.58957ms, 779.629113ms, 449.440889ms, 352.335991ms, 448.817196ms, 348.819209ms, 597.741231ms, 486.969882ms, 756.422254ms, 906.024116ms, 388.794909ms, 294.87306ms, 1.053209052s]
average duration: 571.19
```
